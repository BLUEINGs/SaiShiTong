"use strict";(self["webpackChunkchampation_management_system"]=self["webpackChunkchampation_management_system"]||[]).push([[809],{19:function(t,e,i){i.d(e,{A:function(){return c}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"base-input",class:{mobile:t.isMobile}},[e("input",t._b({attrs:{type:t.type,placeholder:t.isMobile?t.label:t.placeholder},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}},"input",t.$attrs,!1))])},a=[],n={name:"BaseInput",props:{label:String,value:[String,Number],type:{type:String,default:"text"},placeholder:String,showLabel:{type:Boolean,default:!1}},data(){return{id:`input-${Math.random().toString(36).substr(2,9)}`,isMobile:window.innerWidth<=768}},created(){window.addEventListener("resize",this.checkMobile)},destroyed(){window.removeEventListener("resize",this.checkMobile)},methods:{checkMobile(){this.isMobile=window.innerWidth<=768}}},r=n,l=i(1656),o=(0,l.A)(r,s,a,!1,null,"0840465b",null),c=o.exports},2809:function(t,e,i){i.r(e),i.d(e,{default:function(){return M}});i(4114);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"create-meeting"},[e("header",{staticClass:"page-header"},[e("el-button",{attrs:{icon:"el-icon-back"},on:{click:function(e){return t.$router.back()}}},[t._v("返回")]),e("h2",[t._v("创建运动会")])],1),e("div",{staticClass:"content-wrapper"},[t.isSubmitting?e("div",{staticClass:"loading-overlay"},[t._m(0)]):t._e(),e("div",{staticClass:"main-content"},[t.showSuccess?e("div",{staticClass:"success-wrapper"},[e("div",{staticClass:"success-content"},[t._m(1),e("div",{staticClass:"content-body"},[t.isEmptyTemplate?[e("p",[t._v("由于您使用空模板，后续需要完成以下操作：")]),t._m(2)]:[e("p",[t._v("您仍然需要完成以下操作：")]),t._m(3)]],2),e("div",{staticClass:"action-buttons"},[e("el-button",{attrs:{type:"primary"},on:{click:t.copyTodoList}},[t._v("一键复制")]),e("el-button",{attrs:{type:"success"},on:{click:function(e){return t.$router.push("/sport-meetings")}}},[t._v("我知道了")])],1)])]):t._e(),t.showSuccess?t._e():e("div",[e("section",{staticClass:"template-section"},[e("h3",[t._v("选择模板")]),e("div",{staticClass:"template-list"},t._l(t.templates,(function(i){return e("div",{key:i.smId,staticClass:"template-card",class:{active:t.selectedTemplate===i.smId},on:{click:function(e){return t.selectTemplate(i)}}},[e("img",{attrs:{src:i.img,alt:i.name}}),e("div",{staticClass:"template-info"},[e("h4",[t._v(t._s(i.name))]),e("p",[t._v(t._s(i.description))])])])})),0)]),e("form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[e("section",{staticClass:"form-section"},[e("h3",[t._v("基本信息")]),e("div",{staticClass:"form-item"},[e("label",{staticClass:"required"},[t._v("运动会名称")]),e("base-input",{attrs:{placeholder:"请输入运动会名称",required:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("div",{staticClass:"form-item"},[e("label",[t._v("运动会封面")]),e("image-uploader",{attrs:{imageUrl:t.form.cover,file:t.form.coverFile},on:{"update:imageUrl":function(e){return t.$set(t.form,"cover",e)},"update:image-url":function(e){return t.$set(t.form,"cover",e)},"update:file":function(e){return t.$set(t.form,"coverFile",e)}}})],1)]),e("section",{staticClass:"form-section"},[e("h3",[t._v("时间配置")]),e("div",{staticClass:"time-sections"},[e("div",{staticClass:"time-section"},[t._m(4),e("div",{staticClass:"form-item"},[e("label",{staticClass:"required"},[t._v("报名截止")]),e("date-time-input",{attrs:{placeholder:"请选择报名截止时间",required:""},model:{value:t.form.registrationDeadline,callback:function(e){t.$set(t.form,"registrationDeadline",e)},expression:"form.registrationDeadline"}})],1)]),e("div",{staticClass:"time-section"},[t._m(5),e("div",{staticClass:"time-config"},[e("div",{staticClass:"form-group"},[e("div",{staticClass:"form-row"},[e("label",{staticClass:"required"},[t._v("比赛时间")]),e("div",{staticClass:"time-range"},[e("date-time-input",{attrs:{placeholder:"开始时间",required:""},model:{value:t.form.startTime,callback:function(e){t.$set(t.form,"startTime",e)},expression:"form.startTime"}}),e("span",{staticClass:"separator"},[t._v("至")]),e("date-time-input",{attrs:{placeholder:"结束时间",required:""},model:{value:t.form.endTime,callback:function(e){t.$set(t.form,"endTime",e)},expression:"form.endTime"}})],1)])]),e("div",{staticClass:"form-group"},[e("div",{staticClass:"form-row"},[e("label",{staticClass:"required"},[t._v("上午时段")]),e("div",{staticClass:"time-range"},[e("time-input",{attrs:{placeholder:"开始时间",required:"","default-time":"08:00"},model:{value:t.form.amStartTime,callback:function(e){t.$set(t.form,"amStartTime",e)},expression:"form.amStartTime"}}),e("span",{staticClass:"separator"},[t._v("至")]),e("time-input",{attrs:{placeholder:"结束时间",required:"","default-time":"12:00"},model:{value:t.form.amEndTime,callback:function(e){t.$set(t.form,"amEndTime",e)},expression:"form.amEndTime"}})],1)])]),e("div",{staticClass:"form-group"},[e("div",{staticClass:"form-row"},[e("label",{staticClass:"required"},[t._v("下午时段")]),e("div",{staticClass:"time-range"},[e("time-input",{attrs:{placeholder:"开始时间",required:"","default-time":"14:00"},model:{value:t.form.pmStartTime,callback:function(e){t.$set(t.form,"pmStartTime",e)},expression:"form.pmStartTime"}}),e("span",{staticClass:"separator"},[t._v("至")]),e("time-input",{attrs:{placeholder:"结束时间",required:"","default-time":"18:00"},model:{value:t.form.pmEndTime,callback:function(e){t.$set(t.form,"pmEndTime",e)},expression:"form.pmEndTime"}})],1)])])])])])]),e("section",{staticClass:"form-section"},[e("h3",[t._v("团体配置")]),e("div",{staticClass:"time-sections"},[e("div",{staticClass:"time-section"},[t._m(6),e("div",{staticClass:"form-item"},[e("label",{staticClass:"required",staticStyle:{width:"120px"}},[t._v("团体人数上限")]),e("number-input",{attrs:{value:t.form.maxPlayers,min:1,max:10},on:{input:e=>t.form.maxPlayers=e}})],1),e("div",{staticClass:"form-item"},[e("label",{staticClass:"required",staticStyle:{width:"120px"}},[t._v("报名项目上限")]),e("number-input",{attrs:{value:t.form.maxEvents,min:1,max:5},on:{input:e=>t.form.maxEvents=e}})],1)]),e("div",{staticClass:"time-section"},[t._m(7),e("div",{staticClass:"level-config-wrapper"},[t._l(t.form.levelConfig,(function(i,s){return e("div",{key:s,staticClass:"level-config-item"},[e("div",{staticClass:"level-header",on:{click:t.handleLevelHeaderClick}},[e("div",{staticClass:"level-info",on:{click:function(t){t.stopPropagation()}}},[e("el-input",{attrs:{placeholder:"如：学院",size:"small"},model:{value:i.field,callback:function(e){t.$set(i,"field",e)},expression:"level.field"}}),e("el-radio-group",{attrs:{size:"small"},model:{value:i.isNumeric,callback:function(e){t.$set(i,"isNumeric",e)},expression:"level.isNumeric"}},[e("el-radio",{attrs:{label:!0}},[t._v("纯数字")]),e("el-radio",{attrs:{label:!1}},[t._v("自定义")])],1)],1),e("div",{staticClass:"level-actions"},[e("el-button",{attrs:{type:"text",icon:i.isExpanded?"el-icon-arrow-up":"el-icon-arrow-down"}}),0!==s?e("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(e){return e.stopPropagation(),t.removeLevelConfig(s)}}}):t._e()],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:i.isExpanded,expression:"level.isExpanded"}],staticClass:"level-content"},[i.isNumeric?[e("div",{staticClass:"form-item"},[e("label",[t._v("位数限制")]),e("number-input",{attrs:{value:i.digits,min:1,max:4},on:{input:t=>i.digits=t}})],1)]:[e("div",{staticClass:"value-pairs"},[t._l(i.valuePairs,(function(i,a){return e("div",{key:a,staticClass:"value-pair"},[e("el-input",{attrs:{placeholder:"显示值",size:"small"},model:{value:i.label,callback:function(e){t.$set(i,"label",e)},expression:"pair.label"}}),e("el-input",{attrs:{placeholder:"实际值",size:"small"},model:{value:i.value,callback:function(e){t.$set(i,"value",e)},expression:"pair.value"}}),e("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(e){return t.removeValuePair(s,a)}}})],1)})),e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.addValuePair(s)}}},[t._v("添加选项")])],2)]],2)])})),e("div",{staticClass:"add-level"},[e("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.addLevelConfig}},[t._v("添加级别")])],1)],2)])])]),e("section",{staticClass:"form-section"},[e("div",{staticClass:"section-header"},[e("div",{staticClass:"title-wrapper"},[e("h3",[t._v("初始职员")]),e("el-button",{staticClass:"toggle-btn",attrs:{type:"text",size:"large"},on:{click:function(e){t.showStaff=!t.showStaff}}},[t._v(" "+t._s(t.showStaff?"收起":"展开")+" "),e("i",{class:["el-icon-arrow-"+(t.showStaff?"up":"down")]})])],1)]),e("transition",{attrs:{name:"collapse"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.showStaff,expression:"showStaff"}],staticClass:"staff-list"},[e("div",{staticClass:"staff-item creator"},[e("div",{staticClass:"staff-content"},[e("div",{staticClass:"staff-avatar"},[e("img",{attrs:{src:t.form.staff[0].head||t.defaultAvatar,alt:t.form.staff[0].username}})]),e("div",{staticClass:"staff-info"},[e("div",{staticClass:"staff-name"},[t._v(t._s(t.form.staff[0].name))]),e("div",{staticClass:"staff-role"},[t._v("运动会操办者")])])])]),e("div",{staticClass:"hint-text"},[t._v(' 您稍后可在"此运动会"页面完成职员配置 ')])])])],1),e("div",{staticClass:"form-actions"},[e("el-button",{on:{click:function(e){return t.$router.back()}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary","native-type":"submit"}},[t._v("创建")])],1)])])])])])},a=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"loading-content"},[e("i",{staticClass:"el-icon-loading"}),e("p",[t._v("正在初始化运动会，请稍后...")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"success-header"},[e("i",{staticClass:"el-icon-success"}),e("p",{staticClass:"success-title"},[t._v("发布成功！")])])},function(){var t=this,e=t._self._c;return e("ol",{staticClass:"todo-list"},[e("li",[t._v('在"运动项目"页面发布运动项目')]),e("li",[t._v('在"裁判评分"页面创建比赛规则并为项目设置对应的比赛规则')]),e("li",[t._v('在"此运动会"页面邀请团体负责人和裁判注册')]),e("li",[t._v('裁判注册成功后，在"裁判评分"页面为各比赛分配其对应的裁判')])])},function(){var t=this,e=t._self._c;return e("ol",{staticClass:"todo-list"},[e("li",[t._v('在"此运动会"页面邀请团体负责人和裁判注册')]),e("li",[t._v('裁判注册成功后，在"裁判评分"页面为各比赛分配其对应的裁判')])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"section-title"},[e("h4",[t._v("报名时间")]),e("span",{staticClass:"hint"},[t._v("设置报名截止时间，用于确定开始分组的时间点")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"section-title"},[e("h4",[t._v("比赛时间")]),e("span",{staticClass:"hint"},[t._v("设置比赛时间段，用于赛程智能编排")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"section-title"},[e("h4",[t._v("基础参数")]),e("span",{staticClass:"hint"},[t._v("设置团体人数和报名项目的限制")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"section-title"},[e("h4",[t._v("级别编号")]),e("span",{staticClass:"hint"},[t._v("设置系统自动编号的规则，用于生成参赛编号")])])}],n=(i(8111),i(116),i(1701),i(19)),r=i(9417),l=i(9581),o=function(){var t=this,e=t._self._c;return e("div",{ref:"container",staticClass:"time-input"},[e("div",{staticClass:"time-select",attrs:{tabindex:"0"},on:{click:t.handleFocus}},[e("input",{attrs:{readonly:"",placeholder:t.placeholder},domProps:{value:t.displayValue}}),e("i",{staticClass:"el-icon-time"})]),e("bottom-sheet",{attrs:{target:t.$refs.container},model:{value:t.showPicker,callback:function(e){t.showPicker=e},expression:"showPicker"}},[e("div",{staticClass:"time-picker-layout"},[e("div",{staticClass:"time-columns"},[e("div",{staticClass:"column hours"},t._l(24,(function(i){return e("div",{key:i,staticClass:"time-option",class:{active:t.selectedHour===i-1},on:{click:function(e){return t.selectHour(i-1)}}},[t._v(" "+t._s(String(i-1).padStart(2,"0"))+" ")])})),0),e("div",{staticClass:"column minutes"},t._l(60,(function(i){return e("div",{key:i,staticClass:"time-option",class:{active:t.selectedMinute===i-1},on:{click:function(e){return t.selectMinute(i-1)}}},[t._v(" "+t._s(String(i-1).padStart(2,"0"))+" ")])})),0)]),e("div",{staticClass:"picker-footer"},[e("button",{staticClass:"btn cancel-btn",attrs:{type:"button"},on:{click:function(e){t.showPicker=!1}}},[t._v("取消")]),e("button",{staticClass:"btn confirm-btn",attrs:{type:"button"},on:{click:t.confirmSelection}},[t._v("确定")])])])])],1)},c=[],m=i(7051),d=i(9838),u={name:"TimeInput",components:{BottomSheet:d.A},props:{label:String,value:String,placeholder:String,showLabel:{type:Boolean,default:!1}},data(){return{id:`time-${Math.random().toString(36).substr(2,9)}`,isMobile:window.innerWidth<=768,showPicker:!1,selectedHour:0,selectedMinute:0,pickerStyle:{},componentId:`time-${Date.now()}`}},computed:{displayValue(){return this.value?this.value:""}},methods:{selectHour(t){this.selectedHour=t},selectMinute(t){this.selectedMinute=t},handleFocus(){this.showPicker=!this.showPicker},confirmSelection(){const t=`${String(this.selectedHour).padStart(2,"0")}:${String(this.selectedMinute).padStart(2,"0")}`;this.$emit("input",t),this.showPicker=!1}},watch:{value:{immediate:!0,handler(t){if(t){const[e,i]=t.split(":");this.selectedHour=parseInt(e),this.selectedMinute=parseInt(i)}}}},created(){m.l.$on(m.V.PICKER_OPENED,(t=>{t!==this.componentId&&(this.showPicker=!1)}))},mounted(){document.addEventListener("click",(t=>{this.$el.contains(t.target)||(this.showPicker=!1)}))},beforeDestroy(){m.l.$off(m.V.PICKER_OPENED),document.removeEventListener("click",this.handleOutsideClick)}},h=u,p=i(1656),f=(0,p.A)(h,o,c,!1,null,"735b5f4c",null),v=f.exports,g=function(){var t=this,e=t._self._c;return e("div",{staticClass:"number-input"},[e("button",{staticClass:"btn minus",attrs:{type:"button",disabled:t.value<=t.min},on:{click:function(e){return e.preventDefault(),t.decrease.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-minus"})]),e("div",{staticClass:"input-wrap"},[e("input",{attrs:{type:"number"},domProps:{value:t.value},on:{input:t.handleInput,blur:t.handleBlur}})]),e("button",{staticClass:"btn plus",attrs:{type:"button",disabled:t.value>=t.max},on:{click:function(e){return e.preventDefault(),t.increase.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-plus"})])])},C=[],b={name:"NumberInput",props:{value:{type:Number,required:!0},min:{type:Number,default:1},max:{type:Number,default:99},step:{type:Number,default:1}},methods:{decrease(){const t=Math.max(this.value-this.step,this.min);this.$emit("input",t)},increase(){const t=Math.min(this.value+this.step,this.max);this.$emit("input",t)},handleInput(t){let e=parseInt(t.target.value);isNaN(e)||(e=Math.min(Math.max(e,this.min),this.max),this.$emit("input",e))},handleBlur(t){const e=parseInt(t.target.value);isNaN(e)&&this.$emit("input",this.min)}}},w=b,_=(0,p.A)(w,g,C,!1,null,"54eaffe3",null),y=_.exports,k=i(5720),S=i(3603),T={name:"CreateMeeting",components:{BaseInput:n.A,ImageUploader:r.A,DateTimeInput:l.A,TimeInput:v,NumberInput:y},data(){const t=JSON.parse(localStorage.getItem("userInfo")||"{}");return{templates:[],selectedTemplate:null,showStaff:!1,defaultAvatar:"path/to/default-avatar.png",staffTypeOptions:[{id:1,name:"用户"},{id:2,name:"团体负责人"},{id:3,name:"裁判"},{id:4,name:"运动员"},{id:5,name:"运动会操办者"}],form:{name:"",cover:"",coverFile:null,startTime:"",endTime:"",amStartTime:"08:00",amEndTime:"12:00",pmStartTime:"14:00",pmEndTime:"18:00",registrationDeadline:"",staff:t.uid?[{uid:t.uid,name:t.name,head:t.head,userType:[{id:5,name:"运动会操办者"}],isCreator:!0}]:[],levelConfig:[{field:"年级",isNumeric:!0,digits:1,isExpanded:!0,valuePairs:[]}],maxPlayers:3,maxEvents:3},showSuccess:!1,successDialogVisible:!1,isEmptyTemplate:!1,isSubmitting:!1}},async created(){await this.fetchTemplates(),this.templates.length>0&&(this.templates.push({smId:null,name:"空模板",description:"不使用任何预设配置，完全从头开始创建运动会，配置繁琐。创建后我们会指示您下一步操作",img:`data:image/svg+xml,${encodeURIComponent('\n                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 150" fill="none">\n                        <rect width="200" height="150" fill="#f5f7fa"/>\n                        <circle cx="100" cy="75" r="30" stroke="#409EFF" stroke-width="2"/>\n                        <path d="M100 60v30M85 75h30" stroke="#409EFF" stroke-width="2" stroke-linecap="round"/>\n                    </svg>\n                ')}`}),this.selectTemplate(this.templates[0]))},methods:{async fetchTemplates(){try{const t=await(0,k.A)({url:"/meetingTemplates",method:"get"});1===t.code?(Array.isArray(t.data)?this.templates=t.data.map((t=>({...t,description:t.description||"暂无描述"}))):this.templates=t.data?[{...t.data,description:t.data.description||"暂无描述"}]:[],0===this.templates.length&&this.$message.info("暂无可用模板")):this.$message.warning(t.message||"获取模板列表失败")}catch(t){console.error("获取模板失败:",t),this.$message.error(t.message||"获取模板失败，请稍后重试")}},selectTemplate(t){this.selectedTemplate=t.smId;const e=t.numberConfig?JSON.parse(t.numberConfig):[];this.form={...this.form,name:t.name,cover:"",startTime:t.startTime||"",endTime:t.endTime||"",amStartTime:t.amStartTime||"08:00",amEndTime:t.amEndTime||"12:00",pmStartTime:t.pmStartTime||"14:00",pmEndTime:t.pmEndTime||"18:00",registrationDeadline:t.registrationDeadline||"",maxPlayers:t.maxPlayers||3,maxEvents:t.maxEvents||3,levelConfig:e.length>0?e.map((t=>({...t,valuePairs:t.isNumeric?[]:t.valueRange.map((([t,e])=>({label:t,value:e}))),isExpanded:!0,digits:t.isNumeric?t.valueRange.find((t=>"digits"===t[0]))?.[1]||2:void 0}))):[{field:"年级",isNumeric:!0,digits:1,isExpanded:!0,valuePairs:[]}]}},async handleSubmit(){try{if(!this.form.name?.trim())return void this.$message.error("请填写运动会名称");if(!this.form.startTime||!this.form.endTime)return void this.$message.error("请选择比赛时间");if(!this.form.registrationDeadline)return void this.$message.error("请选择报名截止时间");if(!this.form.amStartTime||!this.form.amEndTime)return void this.$message.error("请设置上午时段");if(!this.form.pmStartTime||!this.form.pmEndTime)return void this.$message.error("请设置下午时段");if(!this.form.maxPlayers||this.form.maxPlayers<1)return void this.$message.error("请设置有效的团体人数上限");if(!this.form.maxEvents||this.form.maxEvents<1)return void this.$message.error("请设置有效的报名项目上限");if(0===this.form.levelConfig.length)return void this.$message.error("请至少添加一个级别编号配置");for(const t of this.form.levelConfig){if(!t.field?.trim())return void this.$message.error("请填写所有级别编号的名称");if(t.isNumeric&&(!t.digits||t.digits<1))return void this.$message.error(`请为"${t.field}"设置有效的位数限制`);if(!t.isNumeric&&(!t.valuePairs||0===t.valuePairs.length))return void this.$message.error(`请为"${t.field}"添加自定义选项`)}this.isSubmitting=!0;const e=new FormData,i=t=>{if(!t||isNaN(t))throw new Error("Invalid timestamp");const e="string"===typeof t?Number(t):t,i=new Date(e);if(isNaN(i.getTime()))throw new Error("Invalid date");return i.toISOString()};if(!this.form.name)return void this.$message.error("请填写运动会名称");if(!this.form.startTime||!this.form.endTime||!this.form.registrationDeadline)return void this.$message.error("请填写完整的时间信息");this.selectedTemplate&&e.append("templateId",this.selectedTemplate),e.append("name",this.form.name),this.form.coverFile&&e.append("cover",this.form.coverFile);try{e.append("startTime",i(this.form.startTime)),e.append("endTime",i(this.form.endTime)),e.append("registrationDeadline",i(this.form.registrationDeadline))}catch(t){return console.error("时间格式转换错误:",t),void this.$message.error("请检查时间格式是否正确")}e.append("amStartTime",this.form.amStartTime),e.append("amEndTime",this.form.amEndTime),e.append("pmStartTime",this.form.pmStartTime),e.append("pmEndTime",this.form.pmEndTime),e.append("levelConfig",JSON.stringify(this.form.levelConfig)),e.append("maxPlayers",this.form.maxPlayers),e.append("maxEvents",this.form.maxEvents);const s=await(0,k.A)({url:"/createMeeting",method:"post",data:e,headers:{"Content-Type":"multipart/form-data"}});if(1!==s.code)throw new Error(s.message||"创建失败");{const[t,e]=s.data;(0,S.YQ)(t,e),this.isEmptyTemplate=!this.selectedTemplate,this.showSuccess=!0,window.scrollTo(0,0)}}catch(t){console.error("创建失败:",t),this.$message.error(t.message||"创建失败")}finally{this.isSubmitting=!1}},async copyTodoList(){const t=this.isEmptyTemplate?'后续需要完成的操作：\n1. 在"运动项目"页面发布运动项目\n2. 在"裁判评分"页面创建比赛规则并为项目设置对应的比赛规则\n3. 在"此运动会"页面邀请团体负责人和裁判注册\n4. 裁判注册成功后，在"裁判评分"页面为各比赛分配其对应的裁判':'后续需要完成的操作：\n1. 在"此运动会"页面邀请团体负责人和裁判注册\n2. 裁判注册成功后，在"裁判评分"页面为各比赛分配其对应的裁判';let e=!1;if(navigator.clipboard&&window.isSecureContext)try{await navigator.clipboard.writeText(t),e=!0}catch(i){console.warn("Clipboard API failed:",i)}if(!e){const s=document.createElement("textarea");if(s.value=t,s.style.cssText="position:fixed; top:-99999px; left:-99999px; opacity:0;",document.body.appendChild(s),navigator.userAgent.match(/ipad|iphone/i)){const t=document.createRange();t.selectNodeContents(s);const e=window.getSelection();e.removeAllRanges(),e.addRange(t),s.setSelectionRange(0,999999)}else s.select();try{e=document.execCommand("copy")}catch(i){console.warn("execCommand error:",i),e=!1}document.body.removeChild(s)}e?this.$message.success("复制成功"):this.$message.warning("复制失败，请手动复制")},addLevelConfig(){this.form.levelConfig.push({field:"",isNumeric:!0,digits:2,isExpanded:!0,valuePairs:[]})},removeLevelConfig(t){this.form.levelConfig.splice(t,1)},addValuePair(t){this.form.levelConfig[t].valuePairs.push({label:"",value:""})},removeValuePair(t,e){this.form.levelConfig[t].valuePairs.splice(e,1)},handleLevelHeaderClick(t){if(t.target.closest(".level-info"))return;const e=this.form.levelConfig.findIndex((e=>e.field===t.currentTarget.querySelector("input").value));e>-1&&(this.form.levelConfig[e].isExpanded=!this.form.levelConfig[e].isExpanded)}}},x=T,D=(0,p.A)(x,s,a,!1,null,"4e93008c",null),M=D.exports},7051:function(t,e,i){i.d(e,{V:function(){return n},l:function(){return a}});var s=i(5471);const a=new s["default"],n={CLOSE_ALL_PICKERS:"close-all-pickers",PICKER_OPENED:"picker-opened"}},9581:function(t,e,i){i.d(e,{A:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",{ref:"container",staticClass:"datetime-input"},[e("div",{staticClass:"datetime-select",attrs:{tabindex:"0"},on:{click:t.handleFocus}},[e("input",{attrs:{readonly:"",placeholder:t.placeholder},domProps:{value:t.displayValue}}),e("i",{staticClass:"el-icon-date"})]),e("bottom-sheet",{style:{zIndex:1e4},attrs:{target:t.$refs.container},model:{value:t.showPicker,callback:function(e){t.showPicker=e},expression:"showPicker"}},[e("div",{staticClass:"datetime-picker-layout"},[e("div",{staticClass:"calendar-section"},[e("div",{staticClass:"calendar-header"},[e("button",{on:{click:function(e){return t.changeMonth(-1)}}},[e("i",{staticClass:"el-icon-arrow-left"})]),e("span",[t._v(t._s(t.currentYearMonth))]),e("button",{on:{click:function(e){return t.changeMonth(1)}}},[e("i",{staticClass:"el-icon-arrow-right"})])]),e("div",{staticClass:"weekdays"},t._l(t.weekDays,(function(i){return e("span",{key:i},[t._v(t._s(i))])})),0),e("div",{staticClass:"days-grid"},t._l(t.daysArray,(function(i,s){return e("div",{key:s,staticClass:"day-cell",class:t.getDayClass(i),on:{click:function(e){return t.selectDay(i)}}},[t._v(" "+t._s(i.date)+" ")])})),0)]),e("div",{staticClass:"picker-right-section"},[e("div",{staticClass:"time-section"},[e("div",{staticClass:"time-columns"},[e("div",{staticClass:"column hours"},t._l(24,(function(i){return e("div",{key:i,staticClass:"time-option",class:{active:t.selectedHour===i-1},on:{click:function(e){t.selectedHour=i-1}}},[t._v(" "+t._s(String(i-1).padStart(2,"0"))+" ")])})),0),e("div",{staticClass:"column minutes"},t._l(60,(function(i){return e("div",{key:i,staticClass:"time-option",class:{active:t.selectedMinute===i-1},on:{click:function(e){t.selectedMinute=i-1}}},[t._v(" "+t._s(String(i-1).padStart(2,"0"))+" ")])})),0)])]),e("div",{staticClass:"picker-footer"},[e("button",{staticClass:"btn cancel-btn",attrs:{type:"button"},on:{click:function(e){t.showPicker=!1}}},[t._v("取消")]),e("button",{staticClass:"btn now-btn",attrs:{type:"button"},on:{click:t.setToNow}},[t._v("此刻")]),e("button",{staticClass:"btn confirm-btn",attrs:{type:"button"},on:{click:t.confirmSelection}},[t._v("确定")])])])])])],1)},a=[],n=(i(4114),i(7051)),r=i(9838),l={name:"DateTimeInput",components:{BottomSheet:r.A},props:{label:String,value:[String,Number],placeholder:String,showLabel:{type:Boolean,default:!1}},data(){return{id:`datetime-${Math.random().toString(36).substr(2,9)}`,isMobile:window.innerWidth<=768,currentMonth:new Date,weekDays:["日","一","二","三","四","五","六"],mobileDate:"",showPicker:!1,selectedDate:null,selectedHour:0,selectedMinute:0,componentId:`datetime-${Date.now()}`,showTimeSelect:!1}},computed:{formattedValue(){if(!this.value)return"";const t=new Date(Number(this.value));return t.toISOString().slice(0,16)},currentYearMonth(){return new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"long"}).format(this.currentMonth)},daysArray(){const t=this.currentMonth.getFullYear(),e=this.currentMonth.getMonth(),i=new Date(t,e,1),s=new Date(t,e+1,0),a=[];for(let r=0;r<i.getDay();r++){const i=new Date(t,e,-r);a.unshift({date:i.getDate(),fullDate:i,isCurrentMonth:!1})}for(let r=1;r<=s.getDate();r++){const i=new Date(t,e,r);a.push({date:r,fullDate:i,isCurrentMonth:!0})}const n=42-a.length;for(let r=1;r<=n;r++){const i=new Date(t,e+1,r);a.push({date:r,fullDate:i,isCurrentMonth:!1})}return a},displayValue(){if(!this.selectedDate)return"";const t=new Date(this.selectedDate);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${String(this.selectedHour).padStart(2,"0")}:${String(this.selectedMinute).padStart(2,"0")}`},timeString(){return`${String(this.selectedHour).padStart(2,"0")}:${String(this.selectedMinute).padStart(2,"0")}`}},watch:{showPicker(t){this.isMobile&&(this.showPicker=t)},value:{immediate:!0,handler(t){if(!t)return;const e=new Date(Number(t));isNaN(e.getTime())||this.showPicker||(this.selectedDate=new Date(e.getFullYear(),e.getMonth(),e.getDate()),this.selectedHour=e.getHours(),this.selectedMinute=e.getMinutes())}}},methods:{handleDocumentClick(t){this.$el.contains(t.target)||(this.showPicker=!1)},handleInput(t){const e=new Date(t.target.value).getTime();this.$emit("input",e)},changeMonth(t){this.currentMonth=new Date(this.currentMonth.getFullYear(),this.currentMonth.getMonth()+t,1)},selectDay(t){this.selectedDate=t.fullDate},getDayClass(t){return{"other-month":!t.isCurrentMonth,selected:this.selectedDate&&t.fullDate.toDateString()===this.selectedDate.toDateString()}},handleFocus(){const t=!this.showPicker;this.showPicker=t,t&&(n.l.$emit(n.V.PICKER_OPENED,this.componentId),this.initSelectionFromValueOrNow())},confirmSelection(){if(!this.selectedDate)return;const t=new Date(this.selectedDate);t.setHours(this.selectedHour),t.setMinutes(this.selectedMinute),t.setSeconds(0),t.setMilliseconds(0),this.$emit("input",t.getTime()),this.showPicker=!1},setToNow(){const t=new Date;this.selectedDate=new Date(t.getFullYear(),t.getMonth(),t.getDate()),this.selectedHour=t.getHours(),this.selectedMinute=t.getMinutes();const e=new Date(this.selectedDate);e.setHours(this.selectedHour),e.setMinutes(this.selectedMinute),e.setSeconds(0),e.setMilliseconds(0),this.$emit("input",e.getTime())},initSelectionFromValueOrNow(){if(this.value){const t=new Date(Number(this.value));this.selectedDate=new Date(t.getFullYear(),t.getMonth(),t.getDate()),this.selectedHour=t.getHours(),this.selectedMinute=t.getMinutes()}else this.setToNow()}},created(){n.l.$on(n.V.PICKER_OPENED,(t=>{t!==this.componentId&&(this.showPicker=!1)}))},mounted(){document.addEventListener("click",this.handleDocumentClick)},beforeDestroy(){n.l.$off(n.V.PICKER_OPENED),document.removeEventListener("click",this.handleDocumentClick)}},o=l,c=i(1656),m=(0,c.A)(o,s,a,!1,null,null,null),d=m.exports},9838:function(t,e,i){i.d(e,{A:function(){return c}});var s=function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:t.isMobile?"slide-up":"fade"}},[t.value?e("div",{staticClass:"bottom-sheet-container",class:{mobile:t.isMobile}},[t.isMobile?e("div",{staticClass:"bottom-sheet-mask",on:{click:function(e){return t.$emit("input",!1)}}}):t._e(),e("div",{staticClass:"bottom-sheet-content",style:t.contentStyle},[t.isMobile?e("div",{staticClass:"bottom-sheet-header"},[e("div",{staticClass:"drag-handle"})]):t._e(),e("div",{staticClass:"bottom-sheet-body"},[t._t("default")],2)])]):t._e()])},a=[],n={name:"BottomSheet",props:{value:Boolean,target:HTMLElement},data(){return{isMobile:window.innerWidth<=768,contentStyle:{}}},watch:{value(t){t&&this.$nextTick(this.updatePosition)}},methods:{updatePosition(){if(!this.target)return;const t=this.target.getBoundingClientRect();if(this.isMobile)return void(this.contentStyle={});const e=370,i=window.innerHeight-t.bottom,s=t.top;let a;a=i<e&&s>e?Math.round(t.top-e-6):Math.round(t.bottom+6);let n=Math.round(t.left);const r=8,l=window.innerWidth-8;n<r&&(n=r),n>l&&(n=l),this.contentStyle={position:"fixed",left:`${n}px`,top:`${a}px`,marginTop:"0",transform:"none",zIndex:1e4}}},created(){window.addEventListener("resize",(()=>{this.isMobile=window.innerWidth<=768,this.updatePosition()}))}},r=n,l=i(1656),o=(0,l.A)(r,s,a,!1,null,"6279a14c",null),c=o.exports}}]);
//# sourceMappingURL=809.18eea420.js.map